{"version":3,"sources":["all.js","config.js"],"names":["$","GetProductList","api_path","token","PData","CartArr","console","log","url","axios","get","headers","then","response","data","products","status","RenderProductData","orders","error","ReRenderMyCart","PDArr","CartTbl","document","querySelector","myCartHTML","carts","length","forEach","pItemObj","pIdx","product","images","title","origin_price","price","id","innerHTML","DelSingleCart","pid","DelAllCart","UpdateOrdersData","post","getElementById","val","deleteAtOrderSingle","orderId","deleteAllOrder","ProductArr","HTMLStr","list_Product","item","index","payState","paid","user","name","tel","address","email","ChangePayState","OrderIdx","Ispaid","put","chart","c3","generate","bindto","type","columns","colors"],"mappings":";;AACAA,CAAC,CAAC,YAAU;AACVC,EAAAA,cAAc,GADJ,CAEV;AACD,CAHA,CAAD;AAKA,IAAMC,QAAQ,GAAG,SAAjB;AACA,IAAMC,KAAK,GAAG,8BAAd;AAEA,IAAIC,KAAK,GAAG,EAAZ;AACA,IAAIC,OAAO,GAAG,EAAd;;AAEA,SAASJ,cAAT,GAAyB;AACvBK,EAAAA,OAAO,CAACC,GAAR,qBAAyBL,QAAzB,GADuB,CAEvB;;AACA,MAAIM,GAAG,iEAA0DN,QAA1D,YAAP;AACAM,EAAAA,GAAG,GAAG,oEAAN;AACAF,EAAAA,OAAO,CAACC,GAAR,2BAA+BC,GAA/B;AAEAC,EAAAA,KAAK,CAACC,GAAN,CAAUF,GAAV,EAAc;AACZG,IAAAA,OAAO,EAAE;AACP,uBAAiBR;AADV;AADG,GAAd,EAKCS,IALD,CAKM,UAAUC,QAAV,EAAoB;AACxB;AACA;AACA,QAAIC,IAAI,GAAGD,QAAQ,CAACC,IAApB;AACAR,IAAAA,OAAO,CAACC,GAAR,CAAYO,IAAZ;AACAV,IAAAA,KAAK,GAAGU,IAAI,CAACC,QAAb;AACA,QAAGD,IAAI,CAACE,MAAR,EACGC,iBAAiB,CAACH,IAAI,CAACI,MAAN,CAAjB;AACJ,GAbD,WAcO,UAAUC,KAAV,EAAiB;AACtB;AACAb,IAAAA,OAAO,CAACC,GAAR,CAAYY,KAAZ;AACD,GAjBD;AAqBD,C,CAID;;;AACA,SAASC,cAAT,CAAwBC,KAAxB,EAA8B;AAC5B,MAAMC,OAAO,GAAGC,QAAQ,CAACC,aAAT,CAAuB,qBAAvB,CAAhB;AAEA,MAAIC,UAAU,KAAd;;AACA,MAAGJ,KAAK,CAACK,KAAN,CAAYC,MAAZ,IAAoB,CAAvB,EAAyB,CAExB,CAFD,MAEK;AACHN,IAAAA,KAAK,CAACK,KAAN,CAAYE,OAAZ,CAAoB,UAACC,QAAD,EAAUC,IAAV,EAAiB;AAEnCL,MAAAA,UAAU,yHAIcI,QAAQ,CAACE,OAAT,CAAiBC,MAJ/B,gDAKOH,QAAQ,CAACE,OAAT,CAAiBE,KALxB,2EAQGJ,QAAQ,CAACE,OAAT,CAAiBG,YARpB,2DAUGL,QAAQ,CAACE,OAAT,CAAiBI,KAVpB,kGAY0BN,QAAQ,CAACO,EAZnC,gJAAV;AAmBD,KArBD;AAsBD;;AACDd,EAAAA,OAAO,CAACe,SAAR,GAAqBZ,UAArB;AACD,C,CAGD;;;AACA,SAASa,aAAT,CAAuBC,GAAvB,EAA2B;AACzB;AACA;AACA;AACA9B,EAAAA,KAAK,UAAL,+DAAoEP,QAApE,oBAAsFqC,GAAtF,GACE3B,IADF,CACO,UAAUC,QAAV,EAAoB;AACvBP,IAAAA,OAAO,CAACC,GAAR,CAAYM,QAAQ,CAACC,IAArB;AAEAM,IAAAA,cAAc,CAACP,QAAQ,CAACC,IAAT,CAAcI,MAAf,CAAd;AACH,GALD;AAQD,C,CAED;;;AACA,SAASsB,UAAT,GAAqB;AACnB;AACA/B,EAAAA,KAAK,UAAL,+DAAoEP,QAApE,aACEU,IADF,CACO,UAAUC,QAAV,EAAoB;AACvBP,IAAAA,OAAO,CAACC,GAAR,CAAYM,QAAQ,CAACC,IAArB,EADuB,CAEvB;;AAEAM,IAAAA,cAAc,CAACP,QAAQ,CAACC,IAAT,CAAcI,MAAf,CAAd;AACH,GAND;AAQD;;AAED,SAASuB,gBAAT,GAA2B;AACzB;AACAhC,EAAAA,KAAK,CAACiC,IAAN,+DAAkExC,QAAlE,cAAqF;AACnF;AACA,YAAQ;AACN,cAAQ;AACN,gBAAQqB,QAAQ,CAACoB,cAAT,CAAwB,cAAxB,CADF;AAEN,eAAOpB,QAAQ,CAACoB,cAAT,CAAwB,eAAxB,CAFD;AAGN,iBAASpB,QAAQ,CAACoB,cAAT,CAAwB,eAAxB,CAHH;AAIN,mBAAWpB,QAAQ,CAACoB,cAAT,CAAwB,iBAAxB,CAJL;AAKN,mBAAW3C,CAAC,CAAC,WAAD,CAAD,CAAe4C,GAAf;AALL;AADF;AAF2E,GAArF,EAYChC,IAZD,CAYM,UAAUC,QAAV,EAAoB;AACxB;AACA,QAAIC,IAAI,GAAGD,QAAQ,CAACC,IAApB;AACAR,IAAAA,OAAO,CAACC,GAAR,CAAYM,QAAZ;AACAO,IAAAA,cAAc,CAACP,QAAQ,CAACC,IAAT,CAAcI,MAAf,CAAd;AAED,GAlBD,WAmBO,UAAUC,KAAV,EAAiB;AACtB;AACAb,IAAAA,OAAO,CAACC,GAAR,CAAYY,KAAZ;AACD,GAtBD;AAyBD;;AAED,SAAS0B,mBAAT,CAA6BC,OAA7B,EAAqC;AACnCxC,EAAAA,OAAO,CAACC,GAAR,qBAAyBuC,OAAzB;AACArC,EAAAA,KAAK,UAAL,+DAAoEP,QAApE,qBAAuF4C,OAAvF,GACE;AACEnC,IAAAA,OAAO,EAAE;AACP,uBAAiBR;AADV;AADX,GADF,EAMGS,IANH,CAMQ,UAAUC,QAAV,EAAoB;AACxBP,IAAAA,OAAO,CAACC,GAAR,CAAYM,QAAQ,CAACC,IAArB;AACAM,IAAAA,cAAc,CAACP,QAAQ,CAACC,IAAT,CAAcI,MAAf,CAAd,CAFwB,CAGxB;AAEH,GAXD;AAYD;;AAGD,SAAS6B,cAAT,GAAyB;AACvBtC,EAAAA,KAAK,UAAL,+DAAoEP,QAApE,cACE;AACES,IAAAA,OAAO,EAAE;AACP,uBAAiBR;AADV;AADX,GADF,EAMGS,IANH,CAMQ,UAAUC,QAAV,EAAoB;AACxBP,IAAAA,OAAO,CAACC,GAAR,CAAYM,QAAQ,CAACC,IAArB;AACAM,IAAAA,cAAc,CAACP,QAAQ,CAACC,IAAT,CAAcI,MAAf,CAAd,CAFwB,CAGxB;AAEH,GAXD;AAYD;;AAGD,SAASD,iBAAT,CAA2B+B,UAA3B,EAAsC;AACpC1C,EAAAA,OAAO,CAACC,GAAR,CAAYyC,UAAZ;AACA,MAAIC,OAAO,GAAG,EAAd;AACA,MAAIC,YAAY,GAAG3B,QAAQ,CAACC,aAAT,CAAuB,kBAAvB,CAAnB;AACAyB,EAAAA,OAAO,4ZAAP;AAcAD,EAAAA,UAAU,CAACpB,OAAX,CAAmB,UAACuB,IAAD,EAAMC,KAAN,EAAc;AAC/B;AACA;AACA,QAAIC,QAAQ,GAAG,EAAf;AACAA,IAAAA,QAAQ,GAAGF,IAAI,CAACG,IAAL,IAAa,IAAb,GAAoB,KAApB,GAA0B,KAArC;AACAD,IAAAA,QAAQ,GAAG,KAAX;AACAJ,IAAAA,OAAO,4CAEKE,IAAI,CAACf,EAFV,mDAIMe,IAAI,CAACI,IAAL,CAAUC,IAJhB,kCAKML,IAAI,CAACI,IAAL,CAAUE,GALhB,kDAOKN,IAAI,CAACI,IAAL,CAAUG,OAPf,kCAQKP,IAAI,CAACI,IAAL,CAAUI,KARf,mDAUMR,IAAI,CAACpC,QAAL,CAAc,CAAd,EAAiBkB,KAVvB,wKAcmDoB,QAdnD,kBAciEF,IAAI,CAACf,EAdtE,mCAeMiB,QAfN,mIAmBqDF,IAAI,CAACf,EAnB1D,uGAAP;AAuBD,GA7BD;AA8BAc,EAAAA,YAAY,CAACb,SAAb,GAAuBY,OAAvB;AACD;;AAED,SAASW,cAAT,CAAwBP,QAAxB,EAAiCQ,QAAjC,EAA0C;AACxC,MAAIC,MAAM,GAAG,KAAb;;AACA,MAAGT,QAAQ,IAAE,KAAb,EAAmB;AACjBS,IAAAA,MAAM,GAAG,IAAT;AACD;;AACDrD,EAAAA,KAAK,CAACsD,GAAN,+DAAiE7D,QAAjE,cACE;AACE,YAAQ;AACN,YAAM2D,QADA;AAEN,cAAQC;AAFF;AADV,GADF,EAOE;AACEnD,IAAAA,OAAO,EAAE;AACP,uBAAiBR;AADV;AADX,GAPF,EAYGS,IAZH,CAYQ,UAAUC,QAAV,EAAoB;AACxBP,IAAAA,OAAO,CAACC,GAAR,CAAYM,QAAQ,CAACC,IAArB;AACAM,IAAAA,cAAc,CAACP,QAAQ,CAACC,IAAT,CAAcI,MAAf,CAAd,CAFwB,CAGxB;AACD,GAhBH;AAkBD,C,CAOD;;;AACA,IAAI8C,KAAK,GAAGC,EAAE,CAACC,QAAH,CAAY;AACtBC,EAAAA,MAAM,EAAE,QADc;AACJ;AAClBrD,EAAAA,IAAI,EAAE;AACFsD,IAAAA,IAAI,EAAE,KADJ;AAEFC,IAAAA,OAAO,EAAE,CACT,CAAC,aAAD,EAAgB,CAAhB,CADS,EAET,CAAC,aAAD,EAAgB,CAAhB,CAFS,EAGT,CAAC,WAAD,EAAc,CAAd,CAHS,EAIT,CAAC,IAAD,EAAO,CAAP,CAJS,CAFP;AAQFC,IAAAA,MAAM,EAAC;AACH,qBAAc,SADX;AAEH,qBAAc,SAFX;AAGH,mBAAa,SAHV;AAIH,YAAM;AAJH;AARL;AAFgB,CAAZ,CAAZ;;;AC3PA,IAAMpE,QAAQ,GAAG,SAAjB;AACA,IAAMC,KAAK,GAAG,8BAAd","file":"all.js","sourcesContent":["\r\n$(function(){\r\n  GetProductList()\r\n  // ShowMyCart()\r\n})\r\n\r\nconst api_path = 'raychen'\r\nconst token = \"zjRahQTiUTdZHg18y4XB5gv1Ort2\"\r\n\r\nlet PData = []\r\nlet CartArr = []\r\n\r\nfunction GetProductList(){\r\n  console.log(`api_path  ${api_path}`)\r\n  //https://livejs-api.hexschool.io/api/livejs/v1/admin/raychen/orders\r\n  let url = `https://livejs-api.hexschool.io/api/livejs/v1/admin/${api_path}/orders`\r\n  url = \"https://livejs-api.hexschool.io/api/livejs/v1/admin/raychen/orders\"\r\n  console.log(`GetProductList  ${url}`)\r\n \r\n  axios.get(url,{\r\n    headers: {\r\n      'Authorization': token\r\n    }\r\n  })\r\n  .then(function (response) {\r\n    // 成功會回傳的內容\r\n    // console.log(response);\r\n    let data = response.data\r\n    console.log(data);\r\n    PData = data.products\r\n    if(data.status)\r\n       RenderProductData(data.orders)\r\n  })\r\n  .catch(function (error) {\r\n    // 失敗會回傳的內容\r\n    console.log(error);\r\n  })\r\n\r\n\r\n\r\n}\r\n \r\n \r\n\r\n//更新我的購物車列表\r\nfunction ReRenderMyCart(PDArr){\r\n  const CartTbl = document.querySelector('.shoppingCart-table')\r\n \r\n  let myCartHTML = ``\r\n  if(PDArr.carts.length==0){\r\n\r\n  }else{\r\n    PDArr.carts.forEach((pItemObj,pIdx)=>{\r\n      \r\n      myCartHTML += `\r\n        <tr>\r\n          <td>\r\n              <div class=\"cardItem-title\">\r\n                  <img src=\"${pItemObj.product.images}\" alt=\"\">\r\n                  <p>${pItemObj.product.title}</p>\r\n              </div>\r\n          </td>\r\n          <td>NT$${pItemObj.product.origin_price}</td>\r\n          <td>1</td>\r\n          <td>NT$${pItemObj.product.price}</td>\r\n          <td class=\"discardBtn\">\r\n              <a onclick=DelSingleCart(\"${pItemObj.id}\") href=\"#javascript:;\" class=\"material-icons\">\r\n                  clear\r\n              </a>\r\n          </td>\r\n        </tr>  \r\n      `\r\n      \r\n    })    \r\n  }\r\n  CartTbl.innerHTML =  myCartHTML \r\n}\r\n\r\n\r\n// 刪除購物車內特定產品\r\nfunction DelSingleCart(pid){\r\n  //'https://livejs-api.hexschool.io/api/livejs/v1/admin/raychen/carts/jw1jNknjVsKYPNyqYSWA'\r\n  // console.log(`delete at  ${pid}`)\r\n  //https://livejs-api.hexschool.io/api/livejs/v1/admin/${api_path}/carts/jw1jNknjVsKYPNyqYSWA\r\n  axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/admin/${api_path}/carts/${pid}`).\r\n    then(function (response) {\r\n      console.log(response.data);\r\n   \r\n      ReRenderMyCart(response.data.orders)\r\n  })\r\n\r\n\r\n}\r\n\r\n//清除購物車內全部產品\r\nfunction DelAllCart(){\r\n  //https://livejs-api.hexschool.io/api/livejs/v1/admin/raychen/carts\r\n  axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/admin/${api_path}/carts`).\r\n    then(function (response) {\r\n      console.log(response.data);\r\n      //重新渲染一次List  carts\r\n     \r\n      ReRenderMyCart(response.data.orders)\r\n  })\r\n\r\n}\r\n\r\nfunction UpdateOrdersData(){\r\n  //https://livejs-api.hexschool.io/api/livejs/v1/admin/raychen/orders\r\n  axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/admin/${api_path}/orders`, {\r\n    //帶入的值會使用物件包裝\r\n    \"data\": {\r\n      \"user\": {\r\n        \"name\": document.getElementById(\"customerName\"),\r\n        \"tel\": document.getElementById(\"customerPhone\"),\r\n        \"email\": document.getElementById(\"customerEmail\"),\r\n        \"address\": document.getElementById(\"customerAddress\"),\r\n        \"payment\": $(\"#tradeWay\").val()\r\n      }\r\n    }\r\n  })\r\n  .then(function (response) {\r\n    // 成功會回傳的內容\r\n    let data = response.data\r\n    console.log(response)\r\n    ReRenderMyCart(response.data.orders)\r\n\r\n  })\r\n  .catch(function (error) {\r\n    // 失敗會回傳的內容\r\n    console.log(error);\r\n  });\r\n\r\n\r\n}\r\n\r\nfunction deleteAtOrderSingle(orderId){\r\n  console.log(`delete at ${orderId}`);\r\n  axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/admin/${api_path}/orders/${orderId}`,\r\n    {\r\n      headers: {\r\n        'Authorization': token\r\n      }\r\n    })\r\n    .then(function (response) {\r\n      console.log(response.data);\r\n      ReRenderMyCart(response.data.orders)\r\n      //重新渲染列表\r\n\r\n  })  \r\n}\r\n\r\n\r\nfunction deleteAllOrder(){\r\n  axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/admin/${api_path}/orders`,\r\n    {\r\n      headers: {\r\n        'Authorization': token\r\n      }\r\n    })\r\n    .then(function (response) {\r\n      console.log(response.data);\r\n      ReRenderMyCart(response.data.orders)\r\n      //重新渲染列表\r\n\r\n  })\r\n}\r\n\r\n\r\nfunction RenderProductData(ProductArr){\r\n  console.log(ProductArr)\r\n  var HTMLStr = \"\"\r\n  let list_Product = document.querySelector('.orderPage-table')\r\n  HTMLStr +=`\r\n      <thead>\r\n        <tr>\r\n          <th>訂單編號</th>\r\n          <th>聯絡人</th>\r\n          <th>聯絡地址</th>\r\n          <th>電子郵件</th>\r\n          <th>訂單品項</th>\r\n          <th>訂單日期</th>\r\n          <th>訂單狀態</th>\r\n          <th>操作</th>\r\n        </tr>\r\n      </thead>\r\n  `\r\n  ProductArr.forEach((item,index)=>{\r\n    // console.log(item)\r\n    // console.log(item.user)\r\n    let payState = \"\"\r\n    payState = item.paid == true ? \"已處理\":\"未處理\" \r\n    payState = \"未處理\" \r\n    HTMLStr += `\r\n        <tr>\r\n          <td>${item.id}</td>\r\n          <td>\r\n            <p>${item.user.name}</p>\r\n            <p>${item.user.tel}</p>\r\n          </td>\r\n          <td>${item.user.address}</td>\r\n          <td>${item.user.email}</td>\r\n          <td>\r\n            <p>${item.products[0].title}</p>\r\n          </td>\r\n          <td>2021/03/08</td>\r\n          <td class=\"orderStatus\">\r\n            <a href=\"#javascript:;\" onclick=ChangePayState(\"${payState}\",\"${item.id}\") >\r\n               ${payState}\r\n            </a>\r\n          </td>\r\n          <td>\r\n            <input type=\"button\" onclick=deleteAtOrderSingle(\"${item.id}\") class=\"delSingleOrder-Btn\" value=\"刪除\">\r\n          </td>\r\n        </tr>    \r\n    `\r\n  })\r\n  list_Product.innerHTML=HTMLStr\r\n}\r\n\r\nfunction ChangePayState(payState,OrderIdx){\r\n  let Ispaid = false\r\n  if(payState==\"已處理\"){\r\n    Ispaid = true\r\n  }\r\n  axios.put(`https://livejs-api.hexschool.io/api/livejs/v1/admin/${api_path}/orders`,\r\n    {\r\n      \"data\": {\r\n        \"id\": OrderIdx,\r\n        \"paid\": Ispaid\r\n      }\r\n    },\r\n    {\r\n      headers: {\r\n        'Authorization': token\r\n      }\r\n    })\r\n    .then(function (response) {\r\n      console.log(response.data);\r\n      ReRenderMyCart(response.data.orders)\r\n      //ReRender List\r\n    })\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n// C3.js\r\nlet chart = c3.generate({\r\n  bindto: '#chart', // HTML 元素綁定\r\n  data: {\r\n      type: \"pie\",\r\n      columns: [\r\n      ['Louvre 雙人床架', 1],\r\n      ['Antony 雙人床架', 2],\r\n      ['Anty 雙人床架', 3],\r\n      ['其他', 4],\r\n      ],\r\n      colors:{\r\n          \"Louvre 雙人床架\":\"#DACBFF\",\r\n          \"Antony 雙人床架\":\"#9D7FEA\",\r\n          \"Anty 雙人床架\": \"#5434A7\",\r\n          \"其他\": \"#301E5F\",\r\n      }\r\n  },\r\n});\r\n","const api_path = 'raychen'\r\nconst token = \"zjRahQTiUTdZHg18y4XB5gv1Ort2\""]}